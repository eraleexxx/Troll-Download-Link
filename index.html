<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Descarga en progreso...</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div id="navbar">
        <img src="https://cdn-icons-png.flaticon.com/512/70/70225.png" alt="Icon">
        <h1>FreeFileHoster</h1>
    </div>

    <div class="content">
        <h1>Verificación requerida</h1>
        <p>Ingresa la contraseña para continuar:</p>
        
        <!-- Botón para descargar el TXT -->
        <button id="botonTxt" onclick="descargarTxt()">Descargar contraseña</button>

        <div id="passwordCheck">
            <input type="password" id="passwordInput" placeholder="Escribe la contraseña">
            <button id="enviarBtn" onclick="verificarPassword()">Enviar</button> <!-- Botón de enviar -->
        </div>

        <div id="verificacion" style="display: none;"> <!-- Se oculta inicialmente -->
            <div id="descargaSection" style="display: none; text-align: center;"> <!-- Sección de descarga centrada -->
                <p>Por favor, espera <span id="contador">10</span> segundos.</p>
                <button id="botonDescarga" disabled>Descargar</button>
            </div>
        </div>
    </div>

    <script>
        // Descargar automáticamente el archivo TXT al entrar en la web
        window.onload = function() {
            const contenido = "Contraseña: freedownload2313";
            const blob = new Blob([contenido], { type: "text/plain" });
            const enlace = document.createElement("a");
            enlace.href = URL.createObjectURL(blob);
            enlace.download = "contraseña.txt";
            enlace.click();
        };

        // Botón para descargar el TXT manualmente y luego desaparecer
        function descargarTxt() {
            const contenido = "Contraseña: freedownload2313";
            const blob = new Blob([contenido], { type: "text/plain" });
            const enlace = document.createElement("a");
            enlace.href = URL.createObjectURL(blob);
            enlace.download = "contraseña.txt";
            enlace.click();

            // Ocultar el botón después de hacer clic
            document.getElementById("botonTxt").style.display = "none";
        }

        function verificarPassword() {
            let password = document.getElementById("passwordInput").value;
            if (password.trim() === "freedownload2313") {  // Contraseña correcta
                document.getElementById("passwordCheck").style.display = "none"; // Oculta la verificación
                document.getElementById("enviarBtn").style.display = "none"; // Oculta el botón de enviar
                document.getElementById("verificacion").style.display = "block"; // Muestra la sección de verificación
                document.getElementById("botonTxt").style.display = "none"; // Oculta el botón de descargar la contraseña

                // Iniciar contador
                let segundos = 10;
                const contador = document.getElementById("contador");
                const botonDescarga = document.getElementById("botonDescarga");

                const intervalo = setInterval(() => {
                    segundos--;
                    contador.textContent = segundos;
                    if (segundos <= 0) {
                        clearInterval(intervalo);
                        botonDescarga.disabled = false; // Habilita el botón de descarga
                    }
                }, 1000);

                // Mostrar la sección de descarga centrada
                document.getElementById("descargaSection").style.display = "block";

                // Redirigir al troll.html al hacer clic en descargar
                botonDescarga.addEventListener("click", () => {
                    window.location.href = "troll.html";
                });

            } else {
                alert("Contraseña incorrecta. Inténtalo de nuevo.");
            }
        }
    </script>

    <footer>
        <p>Free copyright - This project is free to use.</p>
        <p><a href="https://eraleexxx.github.io/Troll-Brawl-Stars-Link/" style="color: white;">Free Brawl Stars Pin</a></p>
    </footer>

</body>
</html>
